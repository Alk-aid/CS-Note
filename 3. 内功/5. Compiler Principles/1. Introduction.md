# 1. Language Processors

## 1.1 Compiler And Interperter

- `Compiler`: 
  - a program that can translate a program in one language into another language。
  - an important role of the compiler is to report any error during the translation process
  
  ![image-20220308104251857](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220308104251857.png)
  
- `Interpreter`:
  
  - directly execute the operations specified in the source program
  - source program 和 input 通过 interpreter 产生 output
  
  ![image-20220308104311597](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220308104311597.png)
  
- `Comparison`
  - `Compiler` faster than `interpreter` at mapping inputs to outputs
  - `Intepreter` give better error diagnostics than a compiler，because it executes the source program statement by statement

## 1.2 Create an excutable program

1. Using `preprocessor`

- Collect the source program which be divided into modules stores int separate file
- expand macros into source language statements

2. Using `Compiler`

- produce an assembly - language proagram as its output

3. Using `Assembler`

- produces relocatable machine code

4. Using `Linker`

- large program often compiled in pieces。
- so the relocatable machine code may have to be linked together with other relocatable object files and
  library files into the code that actually runs on the machine.
- Linker also resolves external memory addresses(where the code in one file may refer to a location
  in another file.

.c -> (preprocessor) -> .i  -> (compile) -> .s -> (assembly) -> .o  -> (link)  -> .out

![image-20220109133520360](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220109133520360.png)

# 2. The Structure Of a Compiler

A compilers maps a source program into a target program. there are two parts to this mapping

- `analysis(the front end):`:

  - breaks up the source program into constituent pieces(组成要素) and imposes a grammatical structure on them. Use this structure to created `an intermediate representation` of the source program
  - collects information about the source program and stores it in a data structure called a `symbol table`

- `synthesis(the back end):`

  - constructs the target program from the intermediate representation and the information in the symbol table.

  ![image-20220308151027280](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220308151027280.png)

![image-20220308155025057](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220308155025057.png)

## 2.1 Lexical Analysis(scanning)

1. groups the characters into meaningful sequences called `lexemes`
2. For each `lexeme`, the lexical analyzer produces a token of the form as output

​							$$ <token-name, arrtibute-value>$$

example:

```java
position = intitial + rate * 60
```

其中

- postion是一个 lexeme，被映射为 一个 token `<id, 1>`
- = 是一个lexeme，被映射为 一个token `<=>`

经过lexical analyzer以后被映射为 the sequence of token

​			$$ <id, 1> <=> <id,2> <+> <id,3> <*> <60>$$

## 2.2 Syntax Analysis(parsing)

1. The parser uses the first components of the tokens produced by the lexical analyzer to create
   `a tree-like intermediate representation ` that depicts the grammatical structure of the token stream.

2. each interior node represents an operation
3. the children of the node represent the arguments of the operation.

## 2.3 Semantic Analysis

1. uses the syntax tree and the information in the symbol table to check the source program for semantic consistency with the language definition.

- for example, `type checking`。 like each operator has matching operands.
- The language specication may permit some type conversions called coercions（自动类型转换）

2. It also gathers type information and saves it in either the syntax tree or the symbol table, for subsequent use during intermediate-code generation.

## 2.4 Intermediate Code Generation

1. Syntax trees are a form of intermediate representation。they are commonly used during syntax and semantic analysis.

2. After syntax and semantic analysis of the source program, many compilers generate an explicit low-level or machine-like intermediate representation,which we can think of as a program for an abstract machine.

## 2.5 Code Optimization

...

## 2.6 Code Generation

The code generator takes as input an intermediate representation of the source program and maps it into the target language.

## 2.7 Symbol-Table Management

An essential function of a compiler is to record the variable names used in the source program and collect information about various attributes of each name.

`The symbol table` is a data structure containing a record for each variable name, with fields for the attributes of the name. 

