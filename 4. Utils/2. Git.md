# 1. Git结构

<img src="https://gitee.com/aik-aid/picture/raw/master/image-20210410235117109.png" alt="image-20210410235117109" style="zoom:50%;" />

# 2. 本地库和远程库

**团队内**

<img src="https://gitee.com/aik-aid/picture/raw/master/image-20210410235516238.png" alt="image-20210410235516238" style="zoom:50%;" />

**跨团队**

<img src="https://gitee.com/aik-aid/picture/raw/master/image-20210410235550287.png" alt="image-20210410235550287" style="zoom:50%;" />

# 3. 本地库操作

## 3.1 本地库初始化

### 3.1.1 初始化

**命令**: git init

**效果**:

![image-20210411000350093](https://gitee.com/aik-aid/picture/raw/master/image-20210411000350093.png)

**注意:** .git 目录中存放的是本地库相关的子目录和文件，不要删除，也不要胡乱修改。

### 3.1.2 设置签名

**形式**：用户名 + Email

**作用: **区分不同开发人员的身份

**辨析:** 这里设置的签名和登录远程库的账号 密码无关

**命令:** 

在.git所在的目录使用该命令，而不是在.git目录里面

- 项目级别/仓库级别: 仅在当前本地库范围内有效

  ```git
  git config user.name  sls
  
  git config user.email 1009646197@qq.com
  ```

  可以在.git/config下面查看

- 操作用户级别: 登录当前操作系统的用户范围

  ```git
  git config --global user.name  sls
  
  git config --global user.email 1009646197@qq.com
  ```

  在C/Users/86191(也就是家目录)下的.gitconfig中查看



- 优先级：就近原则，二者都有 用项目级别



## 3.2 基本操作

### 查看状态 

```GIT
git status  
```

### 暂存区操作

1. 添加到暂存区 

   git add a.txt

2. 从暂存区到工作区 

   git rm --cached <file>

### 本地库操作

1. 提交到本地库 
   - git commit a.txt
   - git commit -m "日志" a.txt

2. 当对本地库中的内容修改后

![image-20210411004632774](https://gitee.com/aik-aid/picture/raw/master/image-20210411004632774.png)

​	- 可以使用git add 之后使用 git commit

​    - 也可以直接使用git commit

​	- git restore <file> 取消之前的修改

### 查看日志

1. git log  基本操作

2. git log --pretty=oneline 每个日志只显示一行

3. git log --oneline 第一种的简化版本 区别是这个只显示hash值的一部分
4. git reflog 其中HEAD@(移动到该版本所需要的步数)

![image-20210411100121851](https://gitee.com/aik-aid/picture/raw/master/image-20210411100121851.png)

---

### 版本前进和后退

#### 基于索引[推荐]

```git
git reset --hard 4985f94
```

#### 基于^

只能后退

```git
git reset --hard HEAD^ 后退一个版本
git reset --hard HEAD^^ 后退两个版本
git reset --hard HEAD^^^ 三个版本
```

#### 基于~

```git
git reset --hard HEAD~3 后退三个版本
```

### 比较差异

```git
git diff [文件名]  讲工作区的文件和暂存区进行比较
git diff [本地库的历史版本] [文件名] 讲工作区和历史版本比较
```

## 3.3 分支管理

### 3.3.1 什么是分支

在版本控制过程中，使用多条线同时推进多个任务

![image-20210411104534148](https://gitee.com/aik-aid/picture/raw/master/image-20210411104534148.png)

优点

- 同时并行推进多个功能开发，提高开发效率
- 各个分支在开发过程中，如果某一个分支开发失败，不会对其他分支有任何影响，失败的分支删除重新开始就行了

### 3.3.2 基本操作

#### 查看所有分支

```git 
git branch -v
```

#### 创建分支

```git 
git branch [名字]
```

#### 切换分支

```git
git checkout [分支名字]
```

#### 合并分支

1. 切换到接受修改的分支上
2. 执行merge命令 git merge [分支名]

### 3.3.3 分支冲突

![image-20210411110548118](https://gitee.com/aik-aid/picture/raw/master/image-20210411110548118.png)

解决

1. 编辑文件 删除特殊符号
2. 把文件修改到满意的程度
3. git add [文件名]
4. git commit -m "日志信息" **此时commit不带文件名**

# 4. Git的基本原理

哈希是一个系列的加密算法，各个不同的哈希算法虽然加密强度不同，但是有以下
几个共同点：

1. 不管输入数据的数据量有多大，输入同一个哈希算法，得到的加密结果长度固定。
2. 哈希算法确定，输入数据确定，输出数据能够保证不变
3. 哈希算法确定，输入数据有变化，输出数据一定有变化，而且通常变化很大
4. 哈希算法不可逆

Git 底层采用的是SHA-1 算法。

# 5. 远程库和本地库交互

## 准备操作

1. 创建本地仓库
2. 在github上创建远程仓库

3. 在本地库给远程库起别名

```git
git remote add [别名] [url]
```

## push

```git
git push [远程库别名] [本地库分支]
```

## clone

```git
git clone [url]
```

效果

1. 完整的把远程库下载到本地
2. 创建远程地址的别名(一般是origin)
3. 初始化本地库

## 邀请加入团队

## 拉取

fetch和merge的合并

### fetch

```git
git fetch [远程库别名] [远程分支名]
```

会在本地库创建一个分支

### merge

```git
git merge [远程库别名/远程分支名]
```

## 冲突

1. 如果不是基于Github远程库的最新版所做的修改，不能推送，必须先拉去

# 7. 面试

git init

git add

git commit



git pull = git fetch + git merge



回退：git reset

分支

- git branch
- git checkout
- git merge
