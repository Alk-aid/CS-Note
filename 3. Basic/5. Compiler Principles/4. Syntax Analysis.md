# 1. Introduction

语法分析器的作用：识别词法分析给出的token串 是否是符合 文法 的 正确句子

- 输入：语法分析器(Parser) 从 LA中获得一个由`词法单元`(token)组成的串
- 输出：构造出一颗语法分析树，然后传递给编译器的其他部分；报告语法错误，以及进行错误恢复
- 理论基础：上下文无关文法 和 下推自动机

语法分析的方式：

- 自顶向下的分析：使用`推导`实现
- 自底向上的分析: 使用`规约`实现

> 需要回溯的分析器是不确定的分析器

# 4. Top-Down Parsing

确定的自顶向下分析过程

- 从文法的开始符号开始，不断进行推导，直到推导出和输入的单词串完全匹配的句子
- 如果不能从文法的开始符号推导得到该终结符号串，则报告该终结符号中包含的语法错误

---

First(α)：α的开始符号集 或 首符号集;

- 其中α可以是终结符 也可以是非终结符
- First(α) = {a | α => aβ, a是终结符}
- 目的是为了解决S->Ap | Bq的问题

Follow(A): A的随符集

- 为了解决是否选取A->e产生式

SELECT(A -> α)：产生式的可选集

- 可以选用该产生式时对应输入符号的集合
- α不能推导出e时，SELECT(A->α) = FIRST(α)
- α能推导出e时，SELECT(A->α) = (FIRST(α) - {e}) U FOLLOW(A)

---

> 确定的自顶向下分析要求所给定文法是LL(1)文法

预测分析：是通过在输入中向前看固定个数符号来选择正确的产生式

LL(1)文法：构造向前看1个输入符号的预测分析器

- 第一个L表示从左向右扫描输入；第二个L表示产生最左推导
- 1表示在每一步中只需要向前看一个输入符号来决定语法分析动作
- 充分必要条件是对于每个非终结符A的两个不同产生式，A->α, A->β满足：SELECT(A->α) ∩ SELECT(A->β) = 空集

LL(1)文法的判别

- 求出能推出e的非终结符
- 计算FIRST集
- 计算FOLLOW集
- 计算SELECT集合

---

非LL(1)文法->LL(1)文法的等价变换：

- 若文法含有直接 或 间接 左递归，或含有左公共因子；那么该文法肯定不是LL(1)文法
- 直接左递归：A —> Aα的形式
- 间接左递归：通过有限推导得到直接左递归的形式

消除直接左递归：把左递归转化为右递归

<img src="C:\Users\86191\AppData\Roaming\Typora\typora-user-images\image-20220521231817263.png" alt="image-20220521231817263" style="zoom:50%;" />

![image-20220521232038487](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220521232038487.png)

消除间接左递归：

<img src="http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220521232443631.png" alt="image-20220521232443631" style="zoom:50%;" />

提取左公因子：记得写完后检查是否有无用产生式

<img src="http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220521232522988.png" alt="image-20220521232522988" style="zoom:50%;" />

---

预测分析表

![image-20220522150411439](http://aikaid-img.oss-cn-shanghai.aliyuncs.com/img/image-20220522150411439.png)

# 5. Bottom-Up Parsing

自底向上语法分析试图将一个字符串规约至开始符号

> 句柄：是可以进行规约的符号串
>
> 关键在于如何识别句柄

## 5.1 简单有限分析法

## 5.2 算符优先分析法

## 5.3 LR分析法

LR文法：是最大的，可以构造出相应`移入-规约语法分析器`的文法类

- L: 对输入进行从左到右扫描
- R：反向构造出一个最右推导序列

---

如果有了LR分析表，如何进行自底向上语法分析

