# 1， 为什么要有TCP/IP网络模型

1. 对于同一台设备上的进程间通信，可以使用管道，消息队列，共享内存，信号，信号量等方式
2. 但是对于不同设备上的进程间通信，就需要网络通信，而设备是多样的，所以要兼容多种多样的设备，就需要协商出一套 **通用的网络协议**
3. 这个协议就是TCP/IP网络模型
4. 这个协议是分层的，每一层都有各自的作用和职责

# 2. OSI模型

应用层：    提供应用层协议，方便应用进程之间进行通信(如HTTP协议)

表示层：    数据从“某个特定数据格式”和“网络通用的标准数据格式”的相互转换

会话层：    对何时建立/断开连接，何时发送数据进行管理，并不具备传输数据的功能。

传输层：    建立连接和断开连接的处理，在两个主机之间创建逻辑上的通信连接。

网络层：    将数据从一个主机传输到另一个主机

数据链路层: 负责实现每一个区间内的通信。

物理层：    负责在物理网络中传输二进制数据。

- 在四层，既传输层数据被称作**段**（Segments）；
- 三层网络层数据被称做**包**（Packages）；
- 二层数据链路层时数据被称为**帧**（Frames）；
- 一层物理层时数据被称为**比特流**（Bits）。

# 3. 链路层

数据链路层的传输单位是`帧`， 以太网是当前TCP/IP采用的主要的局域网技术，采用了CSMA/CD(带冲突检测的载波侦听多路接入)

**MAC帧的格式：** 

- 目的地址(6字节) + 源地址(6字节) + 类型(2字节，IP类型，ARP类型，RARP类型) + 数据(46 ~ 1500) + CRC(4字节，用于检验和)

**为什么IP数据报最小46字节**

- 因为以太网帧最小64字节，而以太网去除掉首尾字段共16字节，所以IP数据报最小46字节
- 以太网最小64字节是因为10Mbit/s以太网取51.2us为争用期长度。所以在争用期可以发送512bit，即64字节。
- 如果发生冲突，就一定是在发送的前64字节之内。由于一检测到冲突就立即停止中止发送，这时已经发送出去的数据一定小于64字节。
- 以太网规定小于64字节的都是无效帧。

# 4. CDN

1. 作用: CDN 将数据缓存到离用户物理距离最近的服务器，使得用户可以就近获取请求内容。CDN 一般缓存静态资源文件（页面，脚本，图片，视频，文件等）
2. 原理:将一系列缓存服务器分布到用户访问相对集中的地区和网络; 利用全局负载技术将请求指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求

3. 优点: **提升访问速度**

3. 缺点: 

- **不适宜缓存动态资源**: 主要缓存静态资源，动态资源建立多级缓存或准实时同步；
- **存在数据的一致性问题**: 设置过期时间; 设置版本号
